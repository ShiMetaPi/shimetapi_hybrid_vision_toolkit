# HV Toolkit Viewer Demo

## 功能概述

`hv_toolkit_viewer` 是一个实时事件数据查看器，专门用于可视化HV相机录制的事件数据文件。该工具提供了流式播放功能，能够显示事件数据文件的可视化效果，支持播放控制和交互操作，是分析和调试事件数据的重要工具。

## 使用方法

### 编译

```bash
# 进入项目目录s
cd hv_toolkit_viewer

# 使用CMake编译
mkdir build && cd build
cmake ..
make

### 运行

```bash
# 基本用法
./hv_toolkit_viewer <事件文件.raw>

# 示例
./hv_toolkit_viewer recording_20240101.raw
./hv_toolkit_viewer events.raw
```

### 参数说明

- `<事件文件.raw>`: 输入的HV相机录制的raw事件文件路径（必需）

### 操作控制

- **ESC键**: 退出查看器
- **Q键**: 退出查看器
- **空格键**: 暂停/恢复播放
- **关闭窗口**: 点击窗口关闭按钮退出

## 输出信息

### 启动信息
```
Opened file: recording_20240101.raw
Image size: 640x512
Starting streaming playback...
First event timestamp: 1234567 us
```

### 播放状态
- 实时显示事件数据的可视化图像
- 图像左上角显示当前时间戳（毫秒）
- 图像左上角显示当前帧事件数量
- 每10帧输出处理进度信息
- 播放结束时显示"Playback finished"

### 可视化效果
- **ON事件**: 白色像素点 (255, 255, 255)
- **OFF事件**: 蓝黄色像素点 (135, 206, 235)
- **背景**: 黑色背景 (0, 0, 0)
- **文本信息**: 绿色文字显示时间和事件统计

### 时间窗口机制

- **窗口大小**: 20ms（20000微秒）
- **事件积累**: 在时间窗口内积累所有事件
- **帧生成**: 每个时间窗口生成一帧图像
- **时间推进**: 窗口结束后推进到下一个时间段


## 依赖要求

### 必需依赖
- **OpenCV**: 用于图像显示和处理
- **HV Event Reader**: HV相机事件读取库
- **C++11**: 支持现代C++特性和线程
- **CMake**: 3.10或更高版本

### 系统要求
- **操作系统**: Linux, Windows, macOS
- **内存**: 至少2GB可用内存
- **显示**: 支持OpenCV图像显示的环境
- **编译器**: GCC 7.0+, Clang 6.0+, 或 MSVC 2017+

## 注意事项

1. **文件格式**: 确保输入文件是HV相机录制的标准raw格式
2. **内存使用**: 流式播放设计，内存使用相对较少
3. **显示性能**: 播放流畅度取决于系统的图形处理能力
4. **坐标验证**: 自动过滤无效坐标，但会影响性能
5. **时间同步**: 播放速度可能与实际录制速度不同

