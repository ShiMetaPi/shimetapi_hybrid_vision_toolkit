# HV Camera Record Demo

## 功能概述

`hv_camera_record` 是一个专门用于录制HV相机数据的示例程序。该demo展示了如何同时录制事件相机的EVS数据和传统图像传感器的APS数据，并将它们分别保存为原始事件文件和视频文件。

## 使用方法

### 编译
```bash
cd /path/to/shimetapi_hybrid_camera_toolkit/sample/hv_camera_record
mkdir build && cd build
cmake ..
make
```

### 运行
```bash
# 使用默认参数
./hv_camera_record

# 指定输出文件名
./hv_camera_record events.raw video.avi

# 完整参数指定
./hv_camera_record events.raw video.avi 30 25.0
```

### 参数说明
1. `event_output_file`: 事件数据输出文件名（默认: recorded_events.raw）
2. `video_output_file`: 视频输出文件名（默认: recorded_video.avi）
3. `duration_seconds`: 录制时长（秒，默认: 10）
4. `fps`: 视频帧率（默认: 30.0）

### 操作说明
- **开始录制**: 程序启动后自动开始录制
- **停止录制**: 按 `Ctrl+C` 或等待指定时长结束
- **查看进度**: 控制台会显示录制状态和统计信息

## 输出文件格式

### 事件数据文件 (.raw)
- **格式**: 原始二进制格式
- **内容**: 包含时间戳、坐标和极性的事件数据
- **兼容性**: 可被其他HV工具和Metavision SDK读取

### 视频文件 (.avi)
- **编码**: MJPG (Motion JPEG)
- **分辨率**: 根据相机APS传感器分辨率
- **帧率**: 用户指定的帧率
- **兼容性**: 标准视频格式，可用常见播放器播放

## 依赖要求

### 必需库
- **HV Camera SDK**: 相机控制和数据采集
- **HV Event Writer**: 事件数据写入库
- **OpenCV**: 视频编码和图像处理
- **C++17**: 编译器支持

### 系统要求
- Linux/Windows 操作系统
- USB 3.0 接口
- 足够的存储空间（事件数据可能很大）
- 支持的HV相机设备

## 注意事项

1. **存储空间**: 事件数据文件可能很大，确保有足够存储空间
2. **录制时长**: 长时间录制会产生大量数据，注意磁盘空间
3. **文件权限**: 确保程序有写入目标目录的权限
4. **相机连接**: 确保相机正确连接且未被其他程序占用
5. **帧率设置**: 视频帧率应与相机实际输出帧率匹配

## 故障排除

### 常见问题
1. **相机打开失败**: 
   - 检查USB连接
   - 确认设备ID正确
   - 检查驱动安装

2. **文件创建失败**:
   - 检查目录权限
   - 确认磁盘空间充足
   - 验证文件路径有效

3. **录制中断**:
   - 检查存储空间
   - 确认相机连接稳定
   - 查看错误日志

4. **视频文件损坏**:
   - 确保录制完整结束
   - 检查编码器支持
   - 验证帧率设置
